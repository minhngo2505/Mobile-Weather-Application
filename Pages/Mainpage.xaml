<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage
    x:Class="MauiApp1.Pages.Mainpage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    BackgroundColor="#1A1A1A">

    <Grid RowDefinitions="Auto,*,Auto">

        <!-- ðŸ” SEARCH -->
        <Border Grid.Row="0" Margin="15"
                Stroke="#444" StrokeThickness="1"
                BackgroundColor="#222" Padding="8"
                StrokeShape="RoundRectangle 15">
            <SearchBar x:Name="CitySearchBar"
                       Placeholder="Search city..."
                       TextColor="White"
                       PlaceholderColor="#888"
                       SearchButtonPressed="OnSearchPressed"
                       BackgroundColor="Transparent"
                       FontSize="18"/>
        </Border>


        <!-- MAIN CONTENT -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="22" Padding="15">

                <!-- ðŸŒ¤ CURRENT WEATHER -->
                <VerticalStackLayout Spacing="8" Padding="10">
                    <Label x:Name="CityLabel"
                           Text="Perth, AU"
                           FontSize="34"
                           TextColor="White"
                           HorizontalOptions="Center"
                           FontAttributes="Bold"/>

                    <Label x:Name="TempLabel"
                           Text="21Â°C | Clear"
                           FontSize="26"
                           TextColor="White"
                           HorizontalOptions="Center"/>

                    <Image x:Name="WeatherImage"
                           WidthRequest="120"
                           HeightRequest="120"
                           Aspect="AspectFit"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>


                <!-- ðŸŒ¡ DETAILS GRID -->
                <Grid ColumnDefinitions="*,*"
                      RowDefinitions="Auto,Auto"
                      ColumnSpacing="12"
                      RowSpacing="12">

                    <!-- Feels like -->
                    <Border Background="#222" Stroke="#444" StrokeShape="RoundRectangle 12">
                        <VerticalStackLayout Padding="12">
                            <Label Text="Feels Like" TextColor="#aaa" />
                            <Label x:Name="FeelsLikeLabel" Text="20Â°C" TextColor="White" FontSize="20"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Humidity -->
                    <Border Background="#222" Stroke="#444" StrokeShape="RoundRectangle 12" Grid.Column="1">
                        <VerticalStackLayout Padding="12">
                            <Label Text="Humidity" TextColor="#aaa" />
                            <Label x:Name="HumidityLabel" Text="60%" TextColor="White" FontSize="20"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- UV -->
                    <Border Background="#222" Stroke="#444" StrokeShape="RoundRectangle 12" Grid.Row="1">
                        <VerticalStackLayout Padding="12">
                            <Label Text="UV Index" TextColor="#aaa" />
                            <Label x:Name="UVLabel" Text="5 Moderate" TextColor="White" FontSize="20"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Wind -->
                    <Border Background="#222" Stroke="#444" StrokeShape="RoundRectangle 12" Grid.Row="1" Grid.Column="1">
                        <VerticalStackLayout Padding="12">
                            <Label Text="Wind" TextColor="#aaa" />
                            <Label x:Name="WindLabel" Text="12 km/h NW" TextColor="White" FontSize="20"/>
                        </VerticalStackLayout>
                    </Border>

                </Grid>


                <!-- HOURLY FORECAST -->
                <Border Stroke="#CCCCCC" StrokeThickness="1" StrokeShape="RoundRectangle 15">
                    <VerticalStackLayout Padding="10" Spacing="10">

                        <Label Text="Hourly Forecast"
                    FontAttributes="Bold"
                    FontSize="20" 
                        TextColor="#ccc"/>

                        <CollectionView x:Name="HourlyForecastView"
                            ItemsLayout="HorizontalList"
                            HeightRequest="120"
                            HorizontalScrollBarVisibility="Never">

                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Border Stroke="#ccc"  StrokeThickness="1" StrokeShape="RoundRectangle 10" Padding="8"
                                WidthRequest="80"
                                Margin="5">

                                        <VerticalStackLayout Spacing="5" HorizontalOptions="Center">

                                            <Label Text="{Binding Time}"
                                        FontSize="14"
                                        HorizontalOptions="Center"
                                        TextColor="Black" />

                                            <Image Source="{Binding IconUrl}"
                                        HeightRequest="40"
                                        HorizontalOptions="Center" />

                                            <Label Text="{Binding TempC}"
                                        FontSize="14"
                                        HorizontalOptions="Center"
                                        TextColor="Black" />

                                        </VerticalStackLayout>

                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>

                        </CollectionView>

                    </VerticalStackLayout>
                </Border>


                <!-- 10 DAY FORECAST -->
                <!-- ðŸ“… 10-DAY FORECAST -->
                <!-- in fact just 3 days forecast appears because that meet the free limit , we can update the VIP package to get full version of 10 days forecast -->
                <Border Stroke="#CCCCCC" StrokeThickness="1" StrokeShape="RoundRectangle 15">
                    <VerticalStackLayout Padding="10" Spacing="10">

                        <Label Text="10-Day Forecast"
                   FontAttributes="Bold"
                   FontSize="20"
                               TextColor="#ccc"/>

                        <CollectionView x:Name="TenDayForecast"
                            HeightRequest="400">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Border Stroke="#CCCCCC"
                                StrokeShape="RoundRectangle 10"
                                Padding="10"
                                Margin="5">
                                        <Grid ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="15">

                                            <!-- Day -->
                                            <Label Text="{Binding Day}" 
                                       FontAttributes="Bold" 
                                       Grid.Column="0"
                                                   TextColor="#ccc"/>

                                            <!-- Icon -->
                                            <Image Source="{Binding IconUrl}"
                                       HeightRequest="30"
                                       Grid.Column="1"/>

                                            <!-- Temps -->
                                            <Label  Text="{Binding MaxTemp}" 
                                       TextColor="black"
                                       Grid.Column="2"/>

                                            <Label Text="{Binding MinTemp}"
                                       TextColor="black"
                                       Grid.Column="3"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>

                    </VerticalStackLayout>
                </Border>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
